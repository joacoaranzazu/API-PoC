version: '3.8'

services:
  api-gateway:
    build:
      context: ./services/api
      dockerfile: Dockerfile
    ports:
      - "5000:5000"
    environment:
      - PORT=5000
      - JWT_SECRET_KEY=eagowl-poc-secret-key-2024
      - WALKIEFLEET_URL=http://poc1.eagowl.co:9998
      - WALKIEFLEET_USER=10000
      - WALKIEFLEET_PASS=1948
      - AI_ANALYTICS_URL=http://ai-analytics:5001
      - SMART_MAP_URL=http://smart-map:5002
      - FLEET_OPTIMIZER_URL=http://fleet-optimizer:5003
      - PREDICTIVE_ALERTS_URL=http://predictive-alerts:5004
      - DEBUG=false
    restart: unless-stopped
    networks:
      - eagowl-network

  ai-analytics:
    build:
      context: ./services/ai-analytics
      dockerfile: Dockerfile
    ports:
      - "5001:5001"
    environment:
      - PORT=5001
      - DEBUG=false
    restart: unless-stopped
    networks:
      - eagowl-network

  smart-map:
    build:
      context: ./services/smart-map
      dockerfile: Dockerfile
    ports:
      - "5002:5002"
    environment:
      - PORT=5002
      - DEBUG=false
    restart: unless-stopped
    networks:
      - eagowl-network

  fleet-optimizer:
    build:
      context: ./services/fleet-optimizer
      dockerfile: Dockerfile
    ports:
      - "5003:5003"
    environment:
      - PORT=5003
      - DEBUG=false
    restart: unless-stopped
    networks:
      - eagowl-network

  predictive-alerts:
    build:
      context: ./services/predictive-alerts
      dockerfile: Dockerfile
    ports:
      - "5004:5004"
    environment:
      - PORT=5004
      - DEBUG=false
    restart: unless-stopped
    networks:
      - eagowl-network

networks:
  eagowl-network:
    driver: bridge